<?php

use Dotdigitalgroup\Email\Block\Adminhtml\Dashboard\Information;
use Dotdigitalgroup\Email\ViewModel\Adminhtml\DashboardInformationView;
use Magento\Framework\Escaper;

/**
 * @var $block Information
 * @var $dashboardInformation DashboardInformationView
 */
 // phpcs:disable Magento2.Legacy.EscapeMethodsOnBlockClass

$dashboardInformation = $block->getDashboardInformation();
?>
<table>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('API valid')) ?>:
            </strong>
        </th>
        <td><?= /* @noEscape */ $block->getApiValid() ?></td>
    </tr>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('Importer cron last execution')) ?>:
            </strong>
        </th>
        <td><?= /* @noEscape */ $dashboardInformation->getCronLastExecution('ddg_automation_importer'); ?></td>
    </tr>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('Consumers runner last execution')) ?>:
            </strong>
        </th>
        <td data-id="consumers-runner-status">
            <?= /* @noEscape */ $dashboardInformation->getCronLastExecution('consumers_runner'); ?>
        </td>
    </tr>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('Queue connection')) ?>:
            </strong>
        </th>
        <td data-id="queue-connection-status"><?= /* @noEscape */ $dashboardInformation->getQueueConnection(); ?></td>
    </tr>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('Dynamic content passcode')) ?>:
            </strong>
        </th>
        <td><?= $block->escapeHtml($block->getDynamicContentPasscode()) ?></td>
    </tr>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('Abandoned cart limit time')) ?>:
            </strong>
        </th>
        <td><?= $block->escapeHtml($block->getAbandonedCartLimit()) ?></td>
    </tr>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('Auth')) ?>:
            </strong>
        </th>
        <td><?= $block->escapeHtml($block->getAuthStatus()) ?></td>
    </tr>
    <tr>
        <th>
            <strong class="message-system-short-label">
                <?= $block->escapeHtml(__('Last failed auth')) ?>:
            </strong>
        </th>
        <td><?= $block->escapeHtml($block->getLastFailedAuth()) ?></td>
    </tr>
</table>
<?php // phpcs:enable ?>
